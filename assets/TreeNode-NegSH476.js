import{s as x}from"./transform-B_k4wlz9.js";import{o as L,c as k,b as B}from"./index-CoWgc5c_.js";function I(e){var t=0,n=e.children,l=n&&n.length;if(!l)t=1;else for(;--l>=0;)t+=n[l].value;e.value=t}function W(){return this.eachAfter(I)}function O(e,t){let n=-1;for(const l of this)e.call(t,l,++n,this);return this}function w(e,t){for(var n=this,l=[n],i,u,c=-1;n=l.pop();)if(e.call(t,n,++c,this),i=n.children)for(u=i.length-1;u>=0;--u)l.push(i[u]);return this}function U(e,t){for(var n=this,l=[n],i=[],u,c,s,m=-1;n=l.pop();)if(i.push(n),u=n.children)for(c=0,s=u.length;c<s;++c)l.push(u[c]);for(;n=i.pop();)e.call(t,n,++m,this);return this}function Y(e,t){let n=-1;for(const l of this)if(e.call(t,l,++n,this))return l}function z(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,l=t.children,i=l&&l.length;--i>=0;)n+=l[i].value;t.value=n})}function b(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function v(e){for(var t=this,n=K(t,e),l=[t];t!==n;)t=t.parent,l.push(t);for(var i=l.length;e!==n;)l.splice(i,0,e),e=e.parent;return l}function K(e,t){if(e===t)return e;var n=e.ancestors(),l=t.ancestors(),i=null;for(e=n.pop(),t=l.pop();e===t;)i=e,e=n.pop(),t=l.pop();return i}function j(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function M(){return Array.from(this)}function V(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Z(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*H(){var e=this,t,n=[e],l,i,u;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,l=e.children)for(i=0,u=l.length;i<u;++i)n.push(l[i]);while(n.length)}function g(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=$)):t===void 0&&(t=R);for(var n=new y(e),l,i=[n],u,c,s,m;l=i.pop();)if((c=t(l.data))&&(m=(c=Array.from(c)).length))for(l.children=c,s=m-1;s>=0;--s)i.push(u=c[s]=new y(c[s])),u.parent=l,u.depth=l.depth+1;return n.eachBefore(G)}function F(){return g(this).eachBefore(q)}function R(e){return e.children}function $(e){return Array.isArray(e)?e[1]:null}function q(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function G(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function y(e){this.data=e,this.depth=this.height=0,this.parent=null}y.prototype=g.prototype={constructor:y,count:W,each:O,eachAfter:U,eachBefore:w,find:Y,sum:z,sort:b,path:v,ancestors:j,descendants:M,leaves:V,links:Z,copy:F,[Symbol.iterator]:H};function J(e,t){return e.parent===t.parent?1:2}function S(e){var t=e.children;return t?t[0]:e.t}function N(e){var t=e.children;return t?t[t.length-1]:e.t}function P(e,t,n){var l=n/(t.i-e.i);t.c-=l,t.s+=n,e.c+=l,t.z+=n,t.m+=n}function Q(e){for(var t=0,n=0,l=e.children,i=l.length,u;--i>=0;)u=l[i],u.z+=t,u.m+=t,t+=u.s+(n+=u.c)}function X(e,t,n){return e.a.parent===t.parent?e.a:n}function A(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}A.prototype=Object.create(y.prototype);function ee(e){for(var t=new A(e,0),n,l=[t],i,u,c,s;n=l.pop();)if(u=n._.children)for(n.children=new Array(s=u.length),c=s-1;c>=0;--c)l.push(i=n.children[c]=new A(u[c],c)),i.parent=n;return(t.parent=new A(null,0)).children=[t],t}function te(){var e=J,t=1,n=1,l=null;function i(r){var o=ee(r);if(o.eachAfter(u),o.parent.m=-o.z,o.eachBefore(c),l)r.eachBefore(m);else{var d=r,a=r,h=r;r.eachBefore(function(p){p.x<d.x&&(d=p),p.x>a.x&&(a=p),p.depth>h.depth&&(h=p)});var _=d===a?1:e(d,a)/2,f=_-d.x,C=t/(a.x+_+f),T=n/(h.depth||1);r.eachBefore(function(p){p.x=(p.x+f)*C,p.y=p.depth*T})}return r}function u(r){var o=r.children,d=r.parent.children,a=r.i?d[r.i-1]:null;if(o){Q(r);var h=(o[0].z+o[o.length-1].z)/2;a?(r.z=a.z+e(r._,a._),r.m=r.z-h):r.z=h}else a&&(r.z=a.z+e(r._,a._));r.parent.A=s(r,a,r.parent.A||d[0])}function c(r){r._.x=r.z+r.parent.m,r.m+=r.parent.m}function s(r,o,d){if(o){for(var a=r,h=r,_=o,f=a.parent.children[0],C=a.m,T=h.m,p=_.m,D=f.m,E;_=N(_),a=S(a),_&&a;)f=S(f),h=N(h),h.a=r,E=_.z+p-a.z-C+e(_._,a._),E>0&&(P(X(_,r,d),r,E),C+=E,T+=E),p+=_.m,C+=a.m,D+=f.m,T+=h.m;_&&!N(h)&&(h.t=_,h.m+=p-T),a&&!S(f)&&(f.t=a,f.m+=C-D,d=r)}return d}function m(r){r.x*=t,r.y=r.depth*n}return i.separation=function(r){return arguments.length?(e=r,i):e},i.size=function(r){return arguments.length?(l=!1,t=+r[0],n=+r[1],i):l?null:[t,n]},i.nodeSize=function(r){return arguments.length?(l=!0,t=+r[0],n=+r[1],i):l?[t,n]:null},i}const ne={id:"svg1",width:"100%",height:"600",style:{"margin-bottom":"20px"}},oe={__name:"TreeNode",setup(e){return L(()=>{const t={Type:"總行",Level:1,Title:"總經理,執行長",Name:null,Dept_Code:"",Boss_Code:"",Work_Code:null,Amount:2,DUTY_SECTION:null,children:[{Level:2,Title:"營運部",Name:null,Dept_Code:"E1",Boss_Code:"",Work_Code:null,Amount:21,DUTY_SECTION:null,Emp_Str:"",children:[{Type:"總行",Level:3,Title:"生產組",Name:null,Dept_Code:"E1",Boss_Code:"IA",Work_Code:null,Amount:11,DUTY_SECTION:null,Emp_Str:"",children:[{Type:"總行",Level:4,Title:"倉儲物流組",Name:null,Dept_Code:"E1",Boss_Code:"KA",Work_Code:null,Amount:6,DUTY_SECTION:null,Emp_Str:"",children:[{Type:"總行",Level:9,Title:"品管組",Name:null,Dept_Code:"E1",Boss_Code:"Z",Work_Code:null,Amount:4,DUTY_SECTION:null,Emp_Str:"",children:[]}]}]}]},{Type:"總行",Level:2,Title:"行銷部",Name:null,Dept_Code:"E2",Boss_Code:"",Work_Code:null,Amount:31,DUTY_SECTION:null,Emp_Str:"",children:[{Type:"總行",Level:4,Title:"數位行銷組",Name:null,Dept_Code:"E2",Boss_Code:"KA",Work_Code:null,Amount:8,DUTY_SECTION:null,Emp_Str:"",children:[{Type:"總行",Level:9,Title:"品牌企劃組",Name:null,Dept_Code:"E2",Boss_Code:"Z",Work_Code:null,Amount:14,DUTY_SECTION:null,Emp_Str:"",children:[{Type:"總行",Level:9,Title:"社群媒體組",Name:null,Dept_Code:"E2",Boss_Code:"Z",Work_Code:null,Amount:9,DUTY_SECTION:null,Emp_Str:"",children:[]}]}]}]},{Type:"總行",Level:2,Title:"業務部",Name:null,Dept_Code:"E3",Boss_Code:"",Work_Code:null,Amount:36,DUTY_SECTION:null,Emp_Str:"",children:[{Type:"總行",Level:3,Title:"國內業務組",Name:null,Dept_Code:"E3",Boss_Code:"IA",Work_Code:null,Amount:20,DUTY_SECTION:null,Emp_Str:"",children:[{Type:"總行",Level:9,Title:"國外業務組",Name:null,Dept_Code:"E3",Boss_Code:"Z",Work_Code:null,Amount:16,DUTY_SECTION:null,Emp_Str:"",children:[]}]}]},{Type:"總行",Level:2,Title:"研發部",Name:null,Dept_Code:"E1",Boss_Code:"",Work_Code:null,Amount:26,DUTY_SECTION:null,Emp_Str:"",children:[{Type:"總行",Level:3,Title:"產品開發組",Name:null,Dept_Code:"E1",Boss_Code:"IA",Work_Code:null,Amount:12,DUTY_SECTION:null,Emp_Str:"",children:[{Type:"總行",Level:4,Title:"技術創新組",Name:null,Dept_Code:"E1",Boss_Code:"KA",Work_Code:null,Amount:14,DUTY_SECTION:null,Emp_Str:"",children:[]}]}]},{Type:"總行",Level:2,Title:"財務部",Name:null,Dept_Code:"E1",Boss_Code:"",Work_Code:null,Amount:20,DUTY_SECTION:null,Emp_Str:"",children:[{Type:"總行",Level:3,Title:"會計組",Name:null,Dept_Code:"E1",Boss_Code:"IA",Work_Code:null,Amount:12,DUTY_SECTION:null,Emp_Str:"",children:[{Type:"總行",Level:4,Title:"預算與稅務組",Name:null,Dept_Code:"E1",Boss_Code:"KA",Work_Code:null,Amount:8,DUTY_SECTION:null,Emp_Str:"",children:[]}]}]},{Type:"總行",Level:2,Title:"人資部",Name:null,Dept_Code:"E1",Boss_Code:"",Work_Code:null,Amount:10,DUTY_SECTION:null,Emp_Str:"",children:[{Type:"總行",Level:3,Title:"招募與培訓組",Name:null,Dept_Code:"E1",Boss_Code:"IA",Work_Code:null,Amount:5,DUTY_SECTION:null,Emp_Str:"",children:[{Type:"總行",Level:4,Title:"勞資與薪酬組",Name:null,Dept_Code:"E1",Boss_Code:"KA",Work_Code:null,Amount:3,DUTY_SECTION:null,Emp_Str:"",children:[{Type:"總行",Level:4,Title:"福利組",Name:null,Dept_Code:"E1",Boss_Code:"KA",Work_Code:null,Amount:2,DUTY_SECTION:null,Emp_Str:"",children:[]}]}]}]}]},n=x("#svg1"),l=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=n.attr("height"),u=n.append("g").attr("transform","translate(0,40)");let c=te().separation(function(o,d){return(o.parent==d.parent?1:1.5)/o.depth}).size([l*.7,i*.7]);const s=g(t);c(s),u.selectAll(".link").data(s.links()).enter().append("path").attr("class","link").attr("d",function(o){return"M"+o.source.x+","+o.source.y+"V"+(o.source.y+80)+"H"+o.target.x+"V"+o.target.y}),u.selectAll(".link2").data(s.links()).enter().append("path").attr("class","link2").attr("d",function(o){if(o.target.data.Level>=3)return"M"+o.source.x+","+o.source.y+"V"+(o.target.y+0)+"H"+(o.target.x+50)+"V"+o.target.y}),u.selectAll(".node").data(s.descendants()).enter().append("g").attr("class","node").attr("transform",o=>`translate(${o.x},${o.y})`).append("foreignObject").attr("width",100).attr("height",80).attr("x",function(o){return o.data.Level>=3?50:-60}).attr("y",function(o){return o.data.Level>=3?-15:0}).append("xhtml:div").attr("class","el-button el-button--primary").style("writing-mode","horizontal-tb").style("height","auto").style("width","100%").style("text-orientation","upright").html(function(o){var d=o.data.Amount==0?"":"<br/>("+o.data.Amount+")",a=o.data.Title;return a.length>10&&(a=a.replace(",",",<br/>")),o.data.Level===1?'<el-button type="primary" @click="openFullScreen2">'+a+d+"</el-button>":'<el-button type="primary" @click="openFullScreen2">'+o.data.Title+d+"</el-button>"})}),(t,n)=>(B(),k("div",null,[(B(),k("svg",ne))]))}};export{oe as default};
